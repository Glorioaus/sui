# Changelog

本项目的所有重要变更都将记录在此文件中。

格式基于 [Keep a Changelog](https://keepachangelog.com/zh-CN/1.0.0/)。

## [Unreleased]

### Added
- 浦发银行信用卡 PDF 解析器 (`SPDBParser`)
  - 支持月度信用卡账单 PDF 格式
  - 自动识别消费、退款、红包抵扣
  - 退款与消费自动对冲（同商户、同金额）
  - 红包抵扣归类为收入
  - 跳过信用卡还款记录
- 招商银行信用卡 PDF 解析器 (`CMBParser`)
  - 支持月度信用卡账单 PDF 格式
  - 自动识别掌上生活优惠商户交易
  - 退款与消费自动对冲（同商户、同金额）
  - 优惠/红包归类为收入
  - 自动分类停车费、餐饮等常见消费
- 中信银行信用卡 PDF 解析器 (`CITICParser`)
  - 支持月度信用卡账单 PDF 格式
  - 金额规则：负金额=支出，正金额=退款
  - 退款与消费自动对冲（同商户、同金额）
  - 精彩笔笔返、返现金等优惠归类为收入
  - 返现取消与对应返现自动对冲
  - 跳过信用卡还款记录
  - 自动分类餐饮（饿了么/美团）、购物（拼多多/京东）等

## [0.1.0] - 2026-02-12

### Added
- 农业银行 PDF 解析器 (`ABCParser`)
  - 支持"个人活期交易明细清单"格式
  - 自动识别收入/支出交易类型
  - 特殊分类规则：工资、公积金、贷款、微信、支付宝等
- 收入分类配置 `config/category_mapping_income.json`
  - 职业收入：工资、公积金、利息、奖金等
  - 其他收入：退款、报销、礼金等
- Excel 生成器重写
  - 输出 `.xlsx` 格式（非 `.xls`）
  - 10列标准格式：交易日期、分类、类型、子分类、支付账户、金额、成员、商家、项目、备注

### Changed
- 简化 `category_mapping.json` 为两层结构：`{"分类": ["子分类1", "子分类2"]}`
- `base_parser.py` 支持分离的收入/支出分类匹配
- 更新项目文档 (README.md, CLAUDE.md)

### Fixed
- 修复配置文件路径计算错误

---

## 版本说明

- **Added**: 新增功能
- **Changed**: 功能变更
- **Deprecated**: 即将移除的功能
- **Removed**: 已移除的功能
- **Fixed**: Bug 修复
- **Security**: 安全相关修复
